(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["@alicloud/emaschannelservice-js"]=factory();else root["@alicloud/emaschannelservice-js"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _apiAdapter=__webpack_require__(1);var _h5AccsCore=__webpack_require__(2);var _h5AccsCore2=_interopRequireDefault(_h5AccsCore);var _fingerprintjs=__webpack_require__(10);var _fingerprintjs2=_interopRequireDefault(_fingerprintjs);var _getEmasToken=__webpack_require__(11);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var __token="";var __appkey="";function generateWinId(){if(_apiAdapter.sessionStorage.getItem("__emas_accs_device")){return _apiAdapter.sessionStorage.getItem("__emas_accs_device")}var tabId=Math.floor(Math.random()*899+100);var browserId=(0,_apiAdapter.checkIsBrowser)()?new _fingerprintjs2.default({screen_resolution:true,canvas:true}).get():Math.floor(Math.random()*1e9);browserId=browserId.toString().substr(0,11);browserId+=new Array(11-browserId.length).join("0");__accs_device=browserId+"_"+tabId;_apiAdapter.sessionStorage.setItem("__emas_accs_device",__accs_device);return __accs_device}function getSid(){if(_apiAdapter.sessionStorage.getItem("__emas_accs_sid_device")){return _apiAdapter.sessionStorage.getItem("__emas_accs_sid_device")}__emas_accs_sid_device=Math.floor(Math.random()*89999999+1e7);_apiAdapter.sessionStorage.setItem("__emas_accs_sid_device",__emas_accs_sid_device);return __emas_accs_sid_device}var __accs_device=generateWinId();var __emas_accs_sid_device=getSid();function connectWS(aserverProxy,accs_token,ports,timeout,resolve,reject,opt){new _h5AccsCore2.default(resolve,reject,aserverProxy,accs_token,ports,timeout,opt)}function loader(opt){return new Promise(function(resolve,reject){var isSupportWS=(0,_apiAdapter.checkIsSupportWS)();var ports=opt.ports||80;var timeout=opt.timeout||3e3;var aserverProxy=opt.aserverProxy||"";var getToken=opt.getToken=opt.getToken||_getEmasToken.getEmasToken;__appkey=opt.appkey;opt.__accs_device=__accs_device;opt.__emas_accs_sid_device=__emas_accs_sid_device;if(!opt||!opt.appkey){reject({type:"NO_APPKEY",message:"请传入appkey"})}if(isSupportWS){if(!opt.accsToken){getToken({appkey:opt.appkey,deviceId:__accs_device,sid:__emas_accs_sid_device,aserverProxy:aserverProxy,ports:ports,m_params:opt.m_params,noSign:opt.noSign,debug:opt.debug}).then(function(accs_token){if(!accs_token){return reject({type:"GET_TOKEN_ERROR",message:"获取ACCS token时出错",error:"Not get token!"})}connectWS(aserverProxy,accs_token,ports,timeout,resolve,reject,opt)}).catch(function(e){reject({type:"GET_TOKEN_ERROR",message:"获取ACCS token时出错",error:e})})}else{connectWS(aserverProxy,opt.accsToken,ports,timeout,resolve,reject,opt)}}else{reject({type:"NO_WS_SUPPORT",message:"浏览器不支持 WebSocket"})}})}var lib=void 0;if((0,_apiAdapter.checkIsBrowser)()){lib=window.lib||(window.lib={})}else{lib={}}var libAccs=lib.emasAccs={init:loader,bindAble:true,getToken:function getToken(){return __token||""},getAccsDeviceId:function getAccsDeviceId(){return""+__emas_accs_sid_device+__accs_device||""},getAppkey:function getAppkey(){return __appkey||""}};exports.default=libAccs},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.checkIsBrowser=checkIsBrowser;exports.checkIsAliMiniAPP=checkIsAliMiniAPP;exports.checkIsAlipayMiniAPP=checkIsAlipayMiniAPP;exports.checkIsSupportWS=checkIsSupportWS;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var SESSION_STORAGE_DATA=void 0;var sysInfo={};try{if(checkIsAliMiniAPP()){sysInfo=my.getSystemInfoSync&&my.getSystemInfoSync()||{}}}catch(e){sysInfo={}}function getWebSocket(){var UnifyWebSocket=void 0;if(checkIsBrowser()&&window.WebSocket){UnifyWebSocket=window.WebSocket}if(checkIsAliMiniAPP()&&my.connectSocket){UnifyWebSocket=function(){function UnifyWebSocket(url){var _this=this;_classCallCheck(this,UnifyWebSocket);my.connectSocket({url:url,success:function success(){},fail:function fail(res){_this._onError(res)}});this.readyState=0;my.onSocketOpen(function(res){_this.onopen(res);_this.readyState=1});my.onSocketClose(function(res){_this.onclose(res);_this.readyState=3});my.onSocketError(function(res){_this._onError(res)});my.onSocketMessage(function(res){if(checkIsAlipayMiniAPP()){_this.onmessage(res)}else{_this.onmessage(res.data)}})}_createClass(UnifyWebSocket,[{key:"_onError",value:function _onError(res){this.onerror(res)}},{key:"close",value:function close(){this.readyState=2;my.closeSocket()}},{key:"send",value:function send(data){my.sendSocketMessage({data:data,fail:function fail(res){throw res}})}}]);return UnifyWebSocket}()}if(!UnifyWebSocket){throw"Not find WebSocket API!"}return UnifyWebSocket}function getSessionStorage(){if(checkIsBrowser()){return window.sessionStorage}else{SESSION_STORAGE_DATA=SESSION_STORAGE_DATA||{};return{setItem:function setItem(key,value){SESSION_STORAGE_DATA[key]=value},getItem:function getItem(key){return SESSION_STORAGE_DATA[key]}}}}function checkIsBrowser(){return typeof window!=="undefined"&&typeof document!=="undefined"&&!checkIsAliMiniAPP()}function checkIsAliMiniAPP(){return typeof my!=="undefined"}function checkIsAlipayMiniAPP(){return sysInfo&&sysInfo.app&&sysInfo.app==="alipay"}function checkIsSupportWS(){return checkIsBrowser()&&window.WebSocket||checkIsAliMiniAPP()&&my.connectSocket}var WebSocket=exports.WebSocket=getWebSocket();var sessionStorage=exports.sessionStorage=getSessionStorage()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _accsMsg=__webpack_require__(3);var _accsMsg2=_interopRequireDefault(_accsMsg);var _apiAdapter=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var MAX_RECONNECT_TIMES=5;var RECONNECT_INTERVAL=2e3;var DETECT_INTERVAL=3e4;var H5AccsCore=function(){function H5AccsCore(resolve,reject){var aserverProxy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var token=arguments[3];var ports=arguments[4];var _this2=this;var timeout=arguments.length>5&&arguments[5]!==undefined?arguments[5]:3e3;var opt=arguments[6];_classCallCheck(this,H5AccsCore);this._subscribeMap=_accsMsg2.default.subscribeMap;this._ackMap=_accsMsg2.default.ackMap;this._msgMap=_accsMsg2.default.msgMap;this._aserverProxy=aserverProxy;this._ports=ports;this._token=token;this._opt=opt;this._reconnectAble=false;this._closeTimes=0;this._detectTimer=null;if(opt.reconnect){if(!opt.accsToken){this._reconnectAble=true}else{console.warn('The custom "accsToken" can\'t use reconnect mode!')}}this._getConnectionUrl();this._initConnection(function(ret){if(ret.isSuccess){_this2._connection=ret.connection;_this2._sendProbe();_this2._bindEventHandler();if(_this2._opt.accsHeartbeat){_this2.heartCheck={stopped:false,timeoutObj:null,serverTimeoutObj:null,stop:function stop(){var heartCheck=_this2.heartCheck;clearTimeout(heartCheck.timeoutObj);clearTimeout(heartCheck.serverTimeoutObj);heartCheck.stopped=true},reset:function reset(timeout){var heartCheck=_this2.heartCheck;clearTimeout(heartCheck.timeoutObj);clearTimeout(heartCheck.serverTimeoutObj);if(heartCheck.stopped)return;heartCheck.start(timeout)},start:function start(timeout){var heartCheck=_this2.heartCheck;var heartCheckTimeout=timeout||DETECT_INTERVAL;if(heartCheck.stopped)return;heartCheck.timeoutObj=setTimeout(function(){var data={};_this2.send("h5_ping",JSON.stringify(data)).then(function(resp){if(heartCheck.stopped)return;try{_this2.heartCheck.reset(JSON.parse(resp.getText()).timeInterval*1e3)}catch(e){}},function(e){});heartCheck.serverTimeoutObj=setTimeout(function(){_this2.onHeartbeatError&&_this2.onHeartbeatError();heartCheck.stop()},heartCheckTimeout)},heartCheckTimeout)}};_this2.heartCheck.start()}resolve(_this2)}else{reject({type:"OPEN_CONNECTION_ERROR",message:"开启连接失败",error:ret.error})}});setTimeout(function(){if(!_this2.getStatus()){reject({type:"OPEN_CONNECTION_TIMEOUT",message:"开启连接超时",error:""})}},timeout)}_createClass(H5AccsCore,[{key:"_getConnectionUrl",value:function _getConnectionUrl(){var env="m";var protocol=this._opt.protocol||"ws:";if((0,_apiAdapter.checkIsBrowser)()&&window.location.protocol==="https:"){protocol="wss:"}if(this._aserverProxy){this._url=protocol+"//"+this._aserverProxy+":"+this._ports+"/accs_ws/auth?token="+this._token}else{this._url=protocol+"//msgacs."+env+".taobao.com:"+this._ports+"/accs_ws/auth?token="+this._token}return this._url}},{key:"_initConnection",value:function _initConnection(callback){var ws=new _apiAdapter.WebSocket(this._url);ws.onopen=function(){ws.onerror=null;ws.onopen=null;callback&&callback({isSuccess:true,connection:ws})};ws.onerror=function(e){ws.onerror=null;ws.onopen=null;callback&&callback({isSuccess:false,connection:ws,error:e})}}},{key:"_bindEventHandler",value:function _bindEventHandler(){var _this3=this;this._connection.onerror=function(e){console.log("accs_onerror",e);_this3.onError&&_this3.onError(e)};this._connection.onclose=function(code){clearTimeout(_this3._detectTimer);if(_this3._reconnectAble){_this3._reconnect()}else{console.log("accs_onclose",code);_this3.onClose&&_this3.onClose(code)}};this._connection.onmessage=function(evt){_this3._processDownlinkMsg(evt.data)}}},{key:"_sendProbe",value:function _sendProbe(){var _this4=this;this._detectTimer=setTimeout(function(){if(_this4._opt.heartbeat===true){_this4._connection.send(JSON.stringify({type:"ACK",protocol:"HEARTBEAT_ACCS_H5",data:""}));_this4._sendProbe()}else{clearTimeout(_this4._detectTimer)}},DETECT_INTERVAL)}},{key:"_sendACK",value:function _sendACK(msg){this._connection.send(JSON.stringify({type:"ACK",protocol:"ACCS_H5",dataId:msg.dataId,serviceId:msg.serviceId,target:msg.source||"",source:msg.target||"",ip:msg.ip||"",data:"",extHeader:msg.extHeader||{}}))}},{key:"_processDownlinkMsg",value:function _processDownlinkMsg(str){var _this5=this;_accsMsg2.default.processDownlinkMsg(str,function(resp){_this5._sendACK(resp)})}},{key:"onMessage",value:function onMessage(serviceId,callback){if(typeof callback!="function"){return}clearTimeout(this._detectTimer);this._sendProbe();this._subscribeMap["_"+serviceId]=callback}},{key:"onError",value:function onError(e){console.log(e);console.log("webSocket onerror")}},{key:"offMessage",value:function offMessage(serviceId){delete this._subscribeMap["_"+serviceId]}},{key:"send",value:function send(serviceId,data,extHeaderConfig){var _this=this;return new Promise(function(resolve,reject){try{if(!_this.getStatus()){throw"websocket not available"}var message=_accsMsg2.default.packMsg(serviceId,data,extHeaderConfig);if(resolve){_this._ackMap["_"+message.dataId]=resolve;_this._msgMap["_"+message.dataId]=message;if(serviceId==="accs_h5_binduser"){_this._msgMap["binduser"]=message}}clearTimeout(_this._detectTimer);_this._sendProbe();_this._connection.send(JSON.stringify(message))}catch(e){reject(e)}})}},{key:"close",value:function close(){if(this.getStatus()){this.heartCheck.stop();this._reconnectAble=false;this._connection.close()}}},{key:"_reconnect",value:function _reconnect(){var _this6=this;if(++this._closeTimes<MAX_RECONNECT_TIMES){setTimeout(function(){var aserverProxy=_this6._opt.aserverProxy||"";var ports=_this6._opt.ports||80;_this6._opt.getToken({appkey:_this6._opt.appkey,aserverProxy:aserverProxy,deviceId:_this6._opt.__accs_device,sid:_this6._opt.__emas_accs_sid_device,ports:ports,m_params:_this6._opt.m_params,noSign:_this6._opt.noSign,debug:_this6._opt.debug}).then(function(token){if(token){_this6._token=token;_this6._getConnectionUrl();_this6._initConnection(function(ret){if(ret.isSuccess){_this6._connection=ret.connection;_this6._sendProbe();_this6._bindEventHandler();_this6.onReconnect&&_this6.onReconnect(_this6)}else{_this6._reconnect()}})}else{_this6._reconnectAble=false;console.log("webSocket reconnect get TOKEN response error");_this6.onClose&&_this6.onClose()}})["catch"](function(e){_this6._reconnect()})},this._opt.reconnectInterval||RECONNECT_INTERVAL)}else{this._reconnectAble=false;console.log("webSocket reconnect end!");this.onClose&&this.onClose()}}},{key:"dangerouslyReconnect",value:function dangerouslyReconnect(accsToken,successCallback,failureCallback){var _this7=this;this._token=accsToken;this._getConnectionUrl();this._initConnection(function(ret){if(ret.isSuccess){_this7._connection=ret.connection;_this7._sendProbe();_this7._bindEventHandler();console.log(_this7._ackMap);console.log(_this7._msgMap);if(_this7._msgMap["binduser"]){_this7.send("accs_h5_binduser",_this7._msgMap["binduser"]).then(function(resp){if(Object.keys(_this7._ackMap).length>0){Object.keys(_this7._ackMap).forEach(function(dataId){_this7._connection.send(JSON.stringify(_this7._msgMap[dataId]))})}})}else{if(Object.keys(_this7._ackMap).length>0){Object.keys(_this7._ackMap).forEach(function(dataId){console.log(_this7._msgMap[dataId]);_this7._connection.send(JSON.stringify(_this7._msgMap[dataId]))})}}successCallback&&successCallback(_this7)}else{failureCallback&&failureCallback()}})}},{key:"getStatus",value:function getStatus(){return this._connection&&Number(this._connection.readyState)===1}}]);return H5AccsCore}();exports.default=H5AccsCore},function(module,exports,__webpack_require__){"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj)};var _accsResponse=__webpack_require__(4);var _accsResponse2=_interopRequireDefault(_accsResponse);var _format=__webpack_require__(5);var _format2=_interopRequireDefault(_format);var _idGenerator=__webpack_require__(8);var _idGenerator2=_interopRequireDefault(_idGenerator);var _atob=__webpack_require__(6);var _atob2=_interopRequireDefault(_atob);var _btoa=__webpack_require__(9);var _btoa2=_interopRequireDefault(_btoa);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var maxsl=50;var accsMsg={ackMap:{},msgMap:{},subscribeMap:{},__stack__:{},__sl__:0,packMsg:function packMsg(serviceId,data,extHeaderConfig){var encodedData=void 0;if(data.buffer&&data instanceof Uint8Array){var binaryStr=_format2.default.binaryArrayToBinaryString(data);encodedData=(0,_btoa2.default)(binaryStr)}else{if(typeof data!="string"){throw"non-binary data must be string"}encodedData=(0,_btoa2.default)(_format2.default.utf16ToUtf8(data))}var encodedExtHeader={};if((typeof extHeaderConfig==="undefined"?"undefined":_typeof(extHeaderConfig))==="object"&&extHeaderConfig.headers){var extHeaders=extHeaderConfig.headers;Object.keys(extHeaders).forEach(function(header){if(Number(header)&&header>=0&&header<=63&&typeof extHeaders[header]==="string"){if(extHeaderConfig.base64Encode!==false){encodedExtHeader[header]=(0,_btoa2.default)(extHeaders[header])}else{encodedExtHeader[header]=extHeaders[header]}}})}var message={type:"REQ",protocol:"ACCS_H5",dataId:(0,_idGenerator2.default)(),serviceId:serviceId,target:serviceId,source:serviceId,data:encodedData,extHeader:encodedExtHeader};return message},processDownlinkMsg:function processDownlinkMsg(str,dataCb){var resp=new _accsResponse2.default(str);if(resp.protocol!="ACCS_H5"&&resp.protocol!="ACCS_WV"){return}if(resp.err=="1"){var errJsonStr=(0,_atob2.default)(resp.data);var err={};try{err=JSON.parse(errJsonStr)}catch(e){console.error(e)}}switch(resp.type){case"RES":var ackHandler=this.ackMap["_"+resp.dataId];if(ackHandler){ackHandler(resp);delete this.ackMap["_"+resp.dataId];delete this.msgMap["_"+resp.dataId]}break;case"DATA":if(!this.__stack__[resp.dataId]){this.__stack__[resp.dataId]=true;if(this.__sl__++>=maxsl){this.__sl__=0;this.__stack__={}}var serviceHandler=this.subscribeMap["_"+resp.serviceId];serviceHandler&&serviceHandler(resp)}if(resp.extHeader){resp.decodedExtHeader={};Object.keys(resp.extHeader).forEach(function(header){resp.decodedExtHeader[header]=(0,_atob2.default)(resp.extHeader[header])})}dataCb&&dataCb(resp);break;default:}}};exports.default=accsMsg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _format=__webpack_require__(5);var _format2=_interopRequireDefault(_format);var _atob=__webpack_require__(6);var _atob2=_interopRequireDefault(_atob);var _gzip=__webpack_require__(7);var _gzip2=_interopRequireDefault(_gzip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var accsResponse=function(){function accsResponse(jsonStr){_classCallCheck(this,accsResponse);var message=JSON.parse(jsonStr);for(var k in message){if(message.hasOwnProperty(k)){this[k]=message[k]}}}_createClass(accsResponse,[{key:"getText",value:function getText(){if(!this.data){return""}return _format2.default.utf8ToUtf16((0,_atob2.default)(this.data))}},{key:"getBinaryArray",value:function getBinaryArray(){var _this=this;var p=new Promise(function(resolve){if(!_this.data){resolve([]);return}var dataTxt=(0,_atob2.default)(_this.data);var compressType=_this.compressType||"COMMON";var uint8arr=_format2.default.binaryStringToBinaryArray(dataTxt);if(String(compressType)==="GZIP"){var options={level:6,name:"",timestamp:parseInt(Date.now()/1e3,10)};uint8arr=new Uint8Array(_gzip2.default.unzip(uint8arr,options));resolve(uint8arr)}else{resolve(uint8arr)}});return p}}]);return accsResponse}();exports.default=accsResponse},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function utf16ToUtf8(s){if(!s){return}var i,code,ret=[],len=s.length;for(i=0;i<len;i++){code=s.charCodeAt(i);if(code>0&&code<=127){ret.push(s.charAt(i))}else if(code>=128&&code<=2047){ret.push(String.fromCharCode(192|code>>6&31),String.fromCharCode(128|code&63))}else if(code>=2048&&code<=65535){ret.push(String.fromCharCode(224|code>>12&15),String.fromCharCode(128|code>>6&63),String.fromCharCode(128|code&63))}}return ret.join("")}function utf8ToUtf16(s){if(!s){return}var i,codes,bytes,ret=[],len=s.length;for(i=0;i<len;i++){codes=[];codes.push(s.charCodeAt(i));if((codes[0]>>7&255)==0){ret.push(s.charAt(i))}else if((codes[0]>>5&255)==6){codes.push(s.charCodeAt(++i));bytes=[];bytes.push(codes[0]&31);bytes.push(codes[1]&63);ret.push(String.fromCharCode(bytes[0]<<6|bytes[1]))}else if((codes[0]>>4&255)==14){codes.push(s.charCodeAt(++i));codes.push(s.charCodeAt(++i));bytes=[];bytes.push(codes[0]<<4|codes[1]>>2&15);bytes.push((codes[1]&3)<<6|codes[2]&63);ret.push(String.fromCharCode(bytes[0]<<8|bytes[1]))}}return ret.join("")}function binaryStringToBinaryArray(binstr){return new Uint8Array(binstr.split("").map(function(str){return str.charCodeAt()}))}function binaryArrayToBinaryString(binarr){return[].map.call(binarr,function(code){return String.fromCharCode(code)}).join("")}exports.default={utf16ToUtf8:utf16ToUtf8,utf8ToUtf16:utf8ToUtf16,binaryStringToBinaryArray:binaryStringToBinaryArray,binaryArrayToBinaryString:binaryArrayToBinaryString}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(input){try{if(typeof window!=="undefined"&&atob){return atob(input)}}catch(e){console.log(e)}var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var str=String(input).replace(/[=]+$/,"");if(str.length%4==1){throw new Error("'atob' failed: The string to be decoded is not correctly encoded.")}var output="";for(var bc=0,bs,buffer,idx=0;buffer=str.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer)}return output}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var gzip=null;!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){(function(a){"use strict";function b(a){return a&&a.__esModule?a:{default:a}}var d=c(1),e=b(d);gzip=e["default"]}).call(b,function(){return this}())},function(a,b,c){"use strict";!function(){function b(a,b){b.push(255&a)}function d(a,b){b.push(255&a),b.push(a>>>8)}function e(a,b){d(65535&a,b),d(a>>>16,b)}function f(a,c){var d,e=a.length;for(d=0;e>d;d+=1){b(a.charCodeAt(d),c)}}function g(a){return a.shift()}function h(a){return a.shift()|a.shift()<<8}function i(a){var b=h(a),c=h(a);return c>32768?(c-=32768,(c<<16|b)+32768*Math.pow(2,16)):c<<16|b}function j(a){for(var b=[];0!==a[0];){b.push(String.fromCharCode(a.shift()))}return a.shift(),b.join("")}function k(a,b){var c,d=[];for(c=0;b>c;c+=1){d.push(a.shift())}return d}function l(a,c){var d,g=0,h=[];return c||(c={}),d=c.level||v,"string"==typeof a&&(a=Array.prototype.map.call(a,function(a){return a.charCodeAt(0)})),b(p,h),b(q,h),b(r.deflate,h),c.name&&(g|=s.FNAME),b(g,h),e(c.timestamp||parseInt(Date.now()/1e3,10),h),1===d?b(4,h):9===d?b(2,h):b(0,h),b(t[u],h),c.name&&(f(c.name.substring(c.name.lastIndexOf("/")+1),h),b(0,h)),o.deflate(a,d).forEach(function(a){b(a,h)}),e(parseInt(n(a),16),h),e(a.length,h),h}function m(a,b){var c,d,e,f,l,m,u,v,w,x=Array.prototype.slice.call(a,0);if(g(x)!==p||g(x)!==q)throw"Not a GZIP file";if(c=g(x),c=Object.keys(r).some(function(a){return d=a,r[a]===c}),!c)throw"Unsupported compression method";if(e=g(x),f=i(x),l=g(x),c=g(x),Object.keys(t).some(function(a){return t[a]===c?(m=a,!0):void 0}),Object.keys(s),e&s.FEXTRA&&(c=h(x),k(x,c)),e&s.FNAME&&j(x),e&s.FCOMMENT&&j(x),e&s.FHCRC&&h(x),"deflate"===d&&(w=o.inflate(x.splice(0,x.length-8))),e&s.FTEXT&&(w=Array.prototype.map.call(w,function(a){return String.fromCharCode(a)}).join("")),u=i(x),u!==parseInt(n(w),16))throw"Checksum does not match";if(v=i(x),v!==w.length)throw"Size of decompressed file not correct";return w}var n=c(2),o=c(3),p=31,q=139,r={deflate:8},s={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},t={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18},u="unix",v=6;a.exports={zip:l,unzip:m,get DEFAULT_LEVEL(){return v}}}()},function(a,b){"use strict";!function(){function b(){var a,b,c;for(b=0;256>b;b+=1){for(a=b,c=0;8>c;c+=1){1&a?a=g^a>>>1:a>>>=1}f[b]=a>>>0}}function c(a){return Array.prototype.map.call(a,function(a){return a.charCodeAt(0)})}function d(a){var b,c,d,e,f=-1;for(b=0,d=a.length;d>b;b+=1){for(e=255&(f^a[b]),c=0;8>c;c+=1){1===(1&e)?e=e>>>1^g:e>>>=1}f=f>>>8^e}return-1^f}function e(a,b){var c,d,g;if("undefined"!=typeof e.crc&&b&&a||(e.crc=-1,a)){for(c=e.crc,d=0,g=a.length;g>d;d+=1){c=c>>>8^f[255&(c^a[d])]}return e.crc=c,-1^c}}var f=[],g=3988292384;b(),a.exports=function(a,b){var a="string"==typeof a?c(a):a,f=b?d(a):e(a);return(f>>>0).toString(16)},a.exports.direct=d,a.exports.table=e}()},function(a,b,c){"use strict";!function(){a.exports={inflate:c(4),deflate:c(5)}}()},function(a,b){"use strict";!function(){function b(){this.next=null,this.list=null}function c(){this.e=0,this.b=0,this.n=0,this.t=null}function d(a,d,e,f,g,h){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=[],A=[],B=new c,C=[],D=[],E=[];for(y=this.root=null,n=0;n<this.BMAX+1;n++){z[n]=0}for(n=0;n<this.BMAX+1;n++){A[n]=0}for(n=0;n<this.BMAX;n++){C[n]=null}for(n=0;n<this.N_MAX;n++){D[n]=0}for(n=0;n<this.BMAX+1;n++){E[n]=0}j=d>256?a[256]:this.BMAX,q=a,r=0,n=d;do{z[q[r]]++,r++}while(--n>0);if(z[0]===d)return this.root=null,this.m=0,void(this.status=0);for(o=1;o<=this.BMAX&&0===z[o];o++){}for(p=o,o>h&&(h=o),n=this.BMAX;0!==n&&0===z[n];n--){}for(l=n,h>n&&(h=n),v=1<<o;n>o;o++,v<<=1){if((v-=z[o])<0)return this.status=2,void(this.m=h)}if((v-=z[n])<0)return this.status=2,void(this.m=h);for(z[n]+=v,E[1]=o=0,q=z,r=1,u=2;--n>0;){E[u++]=o+=q[r++]}q=a,r=0,n=0;do{0!==(o=q[r++])&&(D[E[o]++]=n)}while(++n<d);for(d=E[l],E[0]=n=0,q=D,r=0,m=-1,t=A[0]=0,s=null,w=0,null;l>=p;p++){for(i=z[p];i-- >0;){for(;p>t+A[1+m];){if(t+=A[1+m],m++,w=(w=l-t)>h?h:w,(k=1<<(o=p-t))>i+1)for(k-=i+1,u=p;++o<w&&!((k<<=1)<=z[++u]);){k-=z[u]}for(t+o>j&&j>t&&(o=j-t),w=1<<o,A[1+m]=o,s=[],x=0;w>x;x++){s[x]=new c}y=y?y.next=new b:this.root=new b,y.next=null,y.list=s,C[m]=s,m>0&&(E[m]=n,B.b=A[m],B.e=16+o,B.t=s,o=(n&(1<<t)-1)>>t-A[m],C[m-1][o].e=B.e,C[m-1][o].b=B.b,C[m-1][o].n=B.n,C[m-1][o].t=B.t)}for(B.b=p-t,r>=d?B.e=99:q[r]<e?(B.e=q[r]<256?16:15,B.n=q[r++]):(B.e=g[q[r]-e],B.n=f[q[r++]-e]),k=1<<p-t,o=n>>t;w>o;o+=k){s[o].e=B.e,s[o].b=B.b,s[o].n=B.n,s[o].t=B.t}for(o=1<<p-1;0!==(n&o);o>>=1){n^=o}for(n^=o;(n&(1<<t)-1)!==E[m];){t-=A[m],m--}}}this.m=A[1],this.status=0!==v&&1!==l?1:0}function e(){return E.length===F?-1:255&E[F++]}function f(a){for(;a>v;){u|=e()<<v,v+=8}}function g(a){return u&N[a]}function h(a){u>>=a,v-=a}function i(a,b,c){var d,e,i;if(0===c)return 0;for(i=0;;){for(f(C),e=A.list[g(C)],d=e.e;d>16;){if(99===d)return-1;h(e.b),d-=16,f(d),e=e.t[g(d)],d=e.e}if(h(e.b),16!==d){if(15===d)break;for(f(d),y=e.n+g(d),h(d),f(D),e=B.list[g(D)],d=e.e;d>16;){if(99===d)return-1;h(e.b),d-=16,f(d),e=e.t[g(d)],d=e.e}for(h(e.b),f(d),z=q-e.n-g(d),h(d);y>0&&c>i;){y--,z&=G-1,q&=G-1,a[b+i++]=p[q++]=p[z++]}if(i===c)return c}else if(q&=G-1,a[b+i++]=p[q++]=e.n,i===c)return c}return w=-1,i}function j(a,b,c){var d;if(d=7&v,h(d),f(16),d=g(16),h(16),f(16),d!==(65535&~u))return-1;for(h(16),y=d,d=0;y>0&&c>d;){y--,q&=G-1,f(8),a[b+d++]=p[q++]=g(8),h(8)}return 0===y&&(w=-1),d}function k(a,b,c){if(!M){var e,f,g=[];for(e=0;144>e;e++){g[e]=8}for(null;256>e;e++){g[e]=9}for(null;280>e;e++){g[e]=7}for(null;288>e;e++){g[e]=8}if(s=7,f=new d(g,288,257,O,P,s),0!==f.status)return console.error("HufBuild error: "+f.status),-1;for(M=f.root,s=f.m,e=0;30>e;e++){g[e]=5}if(t=5,f=new d(g,30,0,Q,R,t),f.status>1)return M=null,console.error("HufBuild error: "+f.status),-1;r=f.root,t=f.m}return A=M,B=r,C=s,D=t,i(a,b,c)}function l(a,b,c){var e,j,k,l,m,n,o,p,q,r=[];for(e=0;316>e;e++){r[e]=0}if(f(5),o=257+g(5),h(5),f(5),p=1+g(5),h(5),f(4),n=4+g(4),h(4),o>286||p>30)return-1;for(j=0;n>j;j++){f(3),r[S[j]]=g(3),h(3)}for(null;19>j;j++){r[S[j]]=0}if(C=7,q=new d(r,19,19,null,null,C),0!==q.status)return-1;for(A=q.root,C=q.m,l=o+p,e=k=0;l>e;){if(f(C),m=A.list[g(C)],j=m.b,h(j),j=m.n,16>j)r[e++]=k=j;else if(16===j){if(f(2),j=3+g(2),h(2),e+j>l)return-1;for(;j-- >0;){r[e++]=k}}else if(17===j){if(f(3),j=3+g(3),h(3),e+j>l)return-1;for(;j-- >0;){r[e++]=0}k=0}else{if(f(7),j=11+g(7),h(7),e+j>l)return-1;for(;j-- >0;){r[e++]=0}k=0}}if(C=K,q=new d(r,o,257,O,P,C),0===C&&(q.status=1),0!==q.status&&1!==q.status)return-1;for(A=q.root,C=q.m,e=0;p>e;e++){r[e]=r[e+o]}return D=L,q=new d(r,p,0,Q,R,D),B=q.root,D=q.m,0===D&&o>257?-1:0!==q.status?-1:i(a,b,c)}function m(){p||(p=[]),q=0,u=0,v=0,w=-1,x=!1,y=z=0,A=null}function n(a,b,c){var d,e;for(d=0;c>d;){if(x&&-1===w)return d;if(y>0){if(w!==H)for(;y>0&&c>d;){y--,z&=G-1,q&=G-1,a[b+d++]=p[q++]=p[z++]}else{for(;y>0&&c>d;){y--,q&=G-1,f(8),a[b+d++]=p[q++]=g(8),h(8)}0===y&&(w=-1)}if(d===c)return d}if(-1===w){if(x)break;f(1),0!==g(1)&&(x=!0),h(1),f(2),w=g(2),h(2),A=null,y=0}switch(w){case H:e=j(a,b+d,c-d);break;case I:e=A?i(a,b+d,c-d):k(a,b+d,c-d);break;case J:e=A?i(a,b+d,c-d):l(a,b+d,c-d);break;default:e=-1}if(-1===e)return x?0:-1;d+=e}return d}function o(a){var b,c=[];m(),E=a,F=0;do{b=n(c,c.length,1024)}while(b>0);return E=null,c}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=32768,H=0,I=1,J=2,K=9,L=6,M=null,N=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],O=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];a.exports=o}()},function(a,b){"use strict";!function(){function b(){this.fc=0,this.dl=0}function c(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function d(a,b,c,d){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d}function e(){this.next=null,this.len=0,this.ptr=[],this.off=0}function f(a){var d;if(a?1>a?a=1:a>9&&(a=9):a=Xa,pa=a,U=!1,la=!1,null===Bb){for(R=S=T=null,Bb=[],Y=[],Z=[],$=[],_=[],sa=[],d=0;zb>d;d++){sa[d]=new b}for(ta=[],d=0;2*ub+1>d;d++){ta[d]=new b}for(ua=[],d=0;tb+2>d;d++){ua[d]=new b}for(va=[],d=0;ub>d;d++){va[d]=new b}for(wa=[],d=0;2*vb+1>d;d++){wa[d]=new b}xa=new c,ya=new c,za=new c,Aa=[],Ba=[],Ea=[],Fa=[],Ga=[],Ha=[],Ia=[],Ja=[]}}function g(a){a.next=R,R=a}function h(){var a;return null!==R?(a=R,R=R.next):a=new e,a.next=null,a.len=a.off=0,a}function i(a){return _[Ta+a]}function j(a,b){return _[Ta+a]=b}function k(a){Bb[W+V++]=a,W+V===$a&&P()}function l(a){a&=65535,$a-2>W+V?(Bb[W+V++]=255&a,Bb[W+V++]=a>>>8):(k(255&a),k(a>>>8))}function m(){da=(da<<Ab^255&Y[ja+ab-1])&hb,ea=i(da),_[ja&ib]=ea,j(da,ja)}function n(a,b){M(b[a].fc,b[a].dl)}function o(a){return 255&(256>a?Ga[a]:Ga[256+(a>>7)])}function p(a,b,c){return a[b].fc<a[c].fc||a[b].fc===a[c].fc&&Ea[b]<=Ea[c]}function q(a,b,c){var d;for(d=0;c>d&&Sa<Ra.length;d++){a[b+d]=255&Ra[Sa++]}return d}function r(){var a;for(a=0;gb>a;a++){_[Ta+a]=0}if(oa=Gb[pa].max_lazy,qa=Gb[pa].good_length,Ya||(ra=Gb[pa].nice_length),na=Gb[pa].max_chain,ja=0,ca=0,ma=q(Y,0,2*Ta),0>=ma)return la=!0,void(ma=0);for(la=!1;lb>ma&&!la;){t()}for(da=0,a=0;ab-1>a;a++){da=(da<<Ab^255&Y[a])&hb}}function s(a){var b,c,d,e,f=na,g=ja,h=ia,i=ja>mb?ja-mb:jb,j=ja+bb,k=Y[g+h-1],l=Y[g+h];ia>=qa&&(f>>=2);do{if(b=a,Y[b+h]===l&&Y[b+h-1]===k&&Y[b]===Y[g]&&Y[++b]===Y[g+1]){for(g+=2,b++;j>g;){for(e=!1,d=0;8>d;d+=1){if(g+=1,b+=1,Y[g]!==Y[b]){e=!0;break}}if(e)break}if(c=bb-(j-g),g=j-bb,c>h){if(ka=a,h=c,Ya){if(c>=bb)break}else if(c>=ra)break;k=Y[g+h-1],l=Y[g+h]}}}while((a=_[a&ib])>i&&0!==--f);return h}function t(){var a,b,c=_a-ma-ja;if(-1===c)c--;else if(ja>=Ta+mb){for(a=0;Ta>a;a++){Y[a]=Y[a+Ta]}for(ka-=Ta,ja-=Ta,ca-=Ta,a=0;gb>a;a++){b=i(a),j(a,b>=Ta?b-Ta:jb)}for(a=0;Ta>a;a++){b=_[a],_[a]=b>=Ta?b-Ta:jb}c+=Ta}la||(a=q(Y,ja+ma,c),0>=a?la=!0:ma+=a)}function u(){for(;0!==ma&&null===S;){var a;if(m(),ea!==jb&&mb>=ja-ea&&(ha=s(ea),ha>ma&&(ha=ma)),ha>=ab){if(a=K(ja-ka,ha-ab),ma-=ha,oa>=ha){ha--;do{ja++,m()}while(0!==--ha);ja++}else ja+=ha,ha=0,da=255&Y[ja],da=(da<<Ab^255&Y[ja+1])&hb}else a=K(0,255&Y[ja]),ma--,ja++;for(a&&(J(0),ca=ja);lb>ma&&!la;){t()}}}function v(){for(;0!==ma&&null===S;){if(m(),ia=ha,fa=ka,ha=ab-1,ea!==jb&&oa>ia&&mb>=ja-ea&&(ha=s(ea),ha>ma&&(ha=ma),ha===ab&&ja-ka>kb&&ha--),ia>=ab&&ia>=ha){var a;a=K(ja-1-fa,ia-ab),ma-=ia-1,ia-=2;do{ja++,m()}while(0!==--ia);ga=!1,ha=ab-1,ja++,a&&(J(0),ca=ja)}else ga?(K(0,255&Y[ja-1])&&(J(0),ca=ja),ja++,ma--):(ga=!0,ja++,ma--);for(;lb>ma&&!la;){t()}}}function w(){la||(aa=0,ba=0,z(),r(),S=null,V=0,W=0,3>=pa?(ia=ab-1,ha=0):(ha=ab-1,ga=!1),X=!1)}function x(a,b,c){var d;return U||(w(),U=!0,0!==ma)?(d=y(a,b,c),d===c?c:X?d:(3>=pa?u():v(),0===ma&&(ga&&K(0,255&Y[ja-1]),J(1),X=!0),d+y(a,d+b,c-d))):(X=!0,0)}function y(a,b,c){var d,e,f;for(d=0;null!==S&&c>d;){for(e=c-d,e>S.len&&(e=S.len),f=0;e>f;f++){a[b+d+f]=S.ptr[S.off+f]}if(S.off+=e,S.len-=e,d+=e,0===S.len){var h;h=S,S=S.next,g(h)}}if(d===c)return d;if(V>W){for(e=c-d,e>V-W&&(e=V-W),f=0;e>f;f++){a[b+d+f]=Bb[W+f]}W+=e,d+=e,V===W&&(V=W=0)}return d}function z(){var a,b,c,d,e;if(0===va[0].dl){for(xa.dyn_tree=sa,xa.static_tree=ua,xa.extra_bits=Cb,xa.extra_base=rb+1,xa.elems=tb,xa.max_length=ob,xa.max_code=0,ya.dyn_tree=ta,ya.static_tree=va,ya.extra_bits=Db,ya.extra_base=0,ya.elems=ub,ya.max_length=ob,ya.max_code=0,za.dyn_tree=wa,za.static_tree=null,za.extra_bits=Eb,za.extra_base=0,za.elems=vb,za.max_length=pb,za.max_code=0,c=0,d=0;qb-1>d;d++){for(Ha[d]=c,a=0;a<1<<Cb[d];a++){Fa[c++]=d}}for(Fa[c-1]=d,e=0,d=0;16>d;d++){for(Ia[d]=e,a=0;a<1<<Db[d];a++){Ga[e++]=d}}for(e>>=7;ub>d;d++){for(Ia[d]=e<<7,a=0;a<1<<Db[d]-7;a++){Ga[256+e++]=d}}for(b=0;ob>=b;b++){Aa[b]=0}for(a=0;143>=a;){ua[a++].dl=8,Aa[8]++}for(;255>=a;){ua[a++].dl=9,Aa[9]++}for(;279>=a;){ua[a++].dl=7,Aa[7]++}for(;287>=a;){ua[a++].dl=8,Aa[8]++}for(D(ua,tb+1),a=0;ub>a;a++){va[a].dl=5,va[a].fc=N(a,5)}A()}}function A(){var a;for(a=0;tb>a;a++){sa[a].fc=0}for(a=0;ub>a;a++){ta[a].fc=0}for(a=0;vb>a;a++){wa[a].fc=0}sa[sb].fc=1,Pa=Qa=0,Ka=La=Ma=0,Na=0,Oa=1}function B(a,b){for(var c=Ba[b],d=b<<1;Ca>=d&&(Ca>d&&p(a,Ba[d+1],Ba[d])&&d++,!p(a,c,Ba[d]));){Ba[b]=Ba[d],b=d,d<<=1}Ba[b]=c}function C(a){var b,c,d,e,f,g,h=a.dyn_tree,i=a.extra_bits,j=a.extra_base,k=a.max_code,l=a.max_length,m=a.static_tree,n=0;for(e=0;ob>=e;e++){Aa[e]=0}for(h[Ba[Da]].dl=0,b=Da+1;zb>b;b++){c=Ba[b],e=h[h[c].dl].dl+1,e>l&&(e=l,n++),h[c].dl=e,c>k||(Aa[e]++,f=0,c>=j&&(f=i[c-j]),g=h[c].fc,Pa+=g*(e+f),null!==m&&(Qa+=g*(m[c].dl+f)))}if(0!==n){do{for(e=l-1;0===Aa[e];){e--}Aa[e]--,Aa[e+1]+=2,Aa[l]--,n-=2}while(n>0);for(e=l;0!==e;e--){for(c=Aa[e];0!==c;){d=Ba[--b],d>k||(h[d].dl!==e&&(Pa+=(e-h[d].dl)*h[d].fc,h[d].fc=e),c--)}}}}function D(a,b){var c,d,e=[],f=0;for(c=1;ob>=c;c++){f=f+Aa[c-1]<<1,e[c]=f}for(d=0;b>=d;d++){var g=a[d].dl;0!==g&&(a[d].fc=N(e[g]++,g))}}function E(a){var b,c,d=a.dyn_tree,e=a.static_tree,f=a.elems,g=-1,h=f;for(Ca=0,Da=zb,b=0;f>b;b++){0!==d[b].fc?(Ba[++Ca]=g=b,Ea[b]=0):d[b].dl=0}for(;2>Ca;){var i=Ba[++Ca]=2>g?++g:0;d[i].fc=1,Ea[i]=0,Pa--,null!==e&&(Qa-=e[i].dl)}for(a.max_code=g,b=Ca>>1;b>=1;b--){B(d,b)}do{b=Ba[nb],Ba[nb]=Ba[Ca--],B(d,nb),c=Ba[nb],Ba[--Da]=b,Ba[--Da]=c,d[h].fc=d[b].fc+d[c].fc,Ea[b]>Ea[c]+1?Ea[h]=Ea[b]:Ea[h]=Ea[c]+1,d[b].dl=d[c].dl=h,Ba[nb]=h++,B(d,nb)}while(Ca>=2);Ba[--Da]=Ba[nb],C(a),D(d,g)}function F(a,b){var c,d,e=-1,f=a[0].dl,g=0,h=7,i=4;for(0===f&&(h=138,i=3),a[b+1].dl=65535,c=0;b>=c;c++){d=f,f=a[c+1].dl,++g<h&&d===f||(i>g?wa[d].fc+=g:0!==d?(d!==e&&wa[d].fc++,wa[wb].fc++):10>=g?wa[xb].fc++:wa[yb].fc++,g=0,e=d,0===f?(h=138,i=3):d===f?(h=6,i=3):(h=7,i=4))}}function G(a,b){var c,d,e=-1,f=a[0].dl,g=0,h=7,i=4;for(0===f&&(h=138,i=3),c=0;b>=c;c++){if(d=f,f=a[c+1].dl,!(++g<h&&d===f)){if(i>g){do{n(d,wa)}while(0!==--g)}else 0!==d?(d!==e&&(n(d,wa),g--),n(wb,wa),M(g-3,2)):10>=g?(n(xb,wa),M(g-3,3)):(n(yb,wa),M(g-11,7));g=0,e=d,0===f?(h=138,i=3):d===f?(h=6,i=3):(h=7,i=4)}}}function H(){var a;for(F(sa,xa.max_code),F(ta,ya.max_code),E(za),a=vb-1;a>=3&&0===wa[Fb[a]].dl;a--){}return Pa+=3*(a+1)+5+5+4,a}function I(a,b,c){var d;for(M(a-257,5),M(b-1,5),M(c-4,4),d=0;c>d;d++){M(wa[Fb[d]].dl,3)}G(sa,a-1),G(ta,b-1)}function J(a){var b,c,d,e,f;if(e=ja-ca,Ja[Ma]=Na,E(xa),E(ya),d=H(),b=Pa+3+7>>3,c=Qa+3+7>>3,b>=c&&(b=c),b>=e+4&&ca>=0)for(M((Ua<<1)+a,3),O(),l(e),l(~e),f=0;e>f;f++){k(Y[ca+f])}else c===b?(M((Va<<1)+a,3),L(ua,va)):(M((Wa<<1)+a,3),I(xa.max_code+1,ya.max_code+1,d+1),L(sa,ta));A(),0!==a&&O()}function K(a,b){if($[Ka++]=b,0===a?sa[b].fc++:(a--,sa[Fa[b]+rb+1].fc++,ta[o(a)].fc++,Z[La++]=a,Na|=Oa),Oa<<=1,0===(7&Ka)&&(Ja[Ma++]=Na,Na=0,Oa=1),pa>2&&0===(4095&Ka)){var c,d=8*Ka,e=ja-ca;for(c=0;ub>c;c++){d+=ta[c].fc*(5+Db[c])}if(d>>=3,La<parseInt(Ka/2,10)&&d<parseInt(e/2,10))return!0}return Ka===db-1||La===fb}function L(a,b){var c,d,e,f,g=0,h=0,i=0,j=0;if(0!==Ka)do{0===(7&g)&&(j=Ja[i++]),d=255&$[g++],0===(1&j)?n(d,a):(e=Fa[d],n(e+rb+1,a),f=Cb[e],0!==f&&(d-=Ha[e],M(d,f)),c=Z[h++],e=o(c),n(e,b),f=Db[e],0!==f&&(c-=Ia[e],M(c,f))),j>>=1}while(Ka>g);n(sb,a)}function M(a,b){ba>Hb-b?(aa|=a<<ba,l(aa),aa=a>>Hb-ba,ba+=b-Hb):(aa|=a<<ba,ba+=b)}function N(a,b){var c=0;do{c|=1&a,a>>=1,c<<=1}while(--b>0);return c>>1}function O(){ba>8?l(aa):ba>0&&k(aa),aa=0,ba=0}function P(){var a,b;if(0!==V){for(a=h(),null===S?S=T=a:T=T.next=a,a.len=V-W,b=0;b<a.len;b++){a.ptr[b]=Bb[W+b]}V=W=0}}function Q(a,b){var c,d;Ra=a,Sa=0,"undefined"==typeof b&&(b=Xa),f(b),d=[];do{c=x(d,d.length,1024)}while(c>0);return Ra=null,d}var R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta=32768,Ua=0,Va=1,Wa=2,Xa=6,Ya=!1,Za=32768,$a=8192,_a=2*Ta,ab=3,bb=258,cb=16,db=8192,eb=15,fb=db,gb=1<<eb,hb=gb-1,ib=Ta-1,jb=0,kb=4096,lb=bb+ab+1,mb=Ta-lb,nb=1,ob=15,pb=7,qb=29,rb=256,sb=256,tb=rb+1+qb,ub=30,vb=19,wb=16,xb=17,yb=18,zb=2*tb+1,Ab=parseInt((eb+ab-1)/ab,10),Bb=null;db>Za&&console.error("error: INBUFSIZ is too small"),Ta<<1>1<<cb&&console.error("error: WSIZE is too large"),eb>cb-1&&console.error("error: HASH_BITS is too large"),(8>eb||258!==bb)&&console.error("error: Code too clever");var Cb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Db=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Eb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Fb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Gb=[new d(0,0,0,0),new d(4,4,8,4),new d(4,5,16,8),new d(4,6,32,32),new d(4,4,16,16),new d(8,16,32,32),new d(8,16,128,128),new d(8,32,128,256),new d(32,128,258,1024),new d(32,258,258,4096)],Hb=16;a.exports=Q,a.exports.DEFAULT_LEVEL=Xa}()}]);exports.default=gzip},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){return Date.now()%1e8+"_"+Math.round(Math.random()*1e4)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(string){try{if(typeof window!=="undefined"&&btoa){return btoa(string)}}catch(e){console.log(e)}var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";string=String(string);var bitmap=void 0,a=void 0,b=void 0,c=void 0,result="",i=0,rest=string.length%3;for(;i<string.length;){if((a=string.charCodeAt(i++))>255||(b=string.charCodeAt(i++))>255||(c=string.charCodeAt(i++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");bitmap=a<<16|b<<8|c;result+=b64.charAt(bitmap>>18&63)+b64.charAt(bitmap>>12&63)+b64.charAt(bitmap>>6&63)+b64.charAt(bitmap&63)}return rest?result.slice(0,rest-3)+"===".substring(rest):result}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(name,context,definition){if(typeof module!=="undefined"&&module.exports){module.exports=definition()}else if(true){!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{context[name]=definition()}})("Fingerprint",undefined,function(){"use strict";var Fingerprint=function Fingerprint(options){var nativeForEach,nativeMap;nativeForEach=Array.prototype.forEach;nativeMap=Array.prototype.map;this.each=function(obj,iterator,context){if(obj===null){return}if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)==={})return}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)==={})return}}}};this.map=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};if((typeof options==="undefined"?"undefined":_typeof(options))=="object"){this.hasher=options.hasher;this.screen_resolution=options.screen_resolution;this.canvas=options.canvas;this.ie_activex=options.ie_activex}else if(typeof options=="function"){this.hasher=options}};Fingerprint.prototype={get:function get(){var keys=[];keys.push(navigator.userAgent);keys.push(navigator.language);keys.push(screen.colorDepth);if(this.screen_resolution){var resolution=this.getScreenResolution();if(typeof resolution!=="undefined"){keys.push(this.getScreenResolution().join("x"))}}keys.push((new Date).getTimezoneOffset());keys.push(this.hasSessionStorage());keys.push(this.hasLocalStorage());keys.push(!!window.indexedDB);if(document.body){keys.push(_typeof(document.body.addBehavior))}else{keys.push(true?"undefined":_typeof(undefined))}keys.push(_typeof(window.openDatabase));keys.push(navigator.cpuClass);keys.push(navigator.platform);keys.push(navigator.doNotTrack);keys.push(this.getPluginsString());if(this.canvas&&this.isCanvasSupported()){keys.push(this.getCanvasFingerprint())}if(this.hasher){return this.hasher(keys.join("###"),31)}else{return this.murmurhash3_32_gc(keys.join("###"),31)}},murmurhash3_32_gc:function murmurhash3_32_gc(key,seed){var remainder,bytes,h1,h1b,c1,c2,k1,i;remainder=key.length&3;bytes=key.length-remainder;h1=seed;c1=3432918353;c2=461845907;i=0;while(i<bytes){k1=key.charCodeAt(i)&255|(key.charCodeAt(++i)&255)<<8|(key.charCodeAt(++i)&255)<<16|(key.charCodeAt(++i)&255)<<24;++i;k1=(k1&65535)*c1+(((k1>>>16)*c1&65535)<<16)&4294967295;k1=k1<<15|k1>>>17;k1=(k1&65535)*c2+(((k1>>>16)*c2&65535)<<16)&4294967295;h1^=k1;h1=h1<<13|h1>>>19;h1b=(h1&65535)*5+(((h1>>>16)*5&65535)<<16)&4294967295;h1=(h1b&65535)+27492+(((h1b>>>16)+58964&65535)<<16)}k1=0;switch(remainder){case 3:k1^=(key.charCodeAt(i+2)&255)<<16;case 2:k1^=(key.charCodeAt(i+1)&255)<<8;case 1:k1^=key.charCodeAt(i)&255;k1=(k1&65535)*c1+(((k1>>>16)*c1&65535)<<16)&4294967295;k1=k1<<15|k1>>>17;k1=(k1&65535)*c2+(((k1>>>16)*c2&65535)<<16)&4294967295;h1^=k1}h1^=key.length;h1^=h1>>>16;h1=(h1&65535)*2246822507+(((h1>>>16)*2246822507&65535)<<16)&4294967295;h1^=h1>>>13;h1=(h1&65535)*3266489909+(((h1>>>16)*3266489909&65535)<<16)&4294967295;h1^=h1>>>16;return h1>>>0},hasLocalStorage:function hasLocalStorage(){try{return!!window.localStorage}catch(e){return true}},hasSessionStorage:function hasSessionStorage(){try{return!!window.sessionStorage}catch(e){return true}},isCanvasSupported:function isCanvasSupported(){var elem=document.createElement("canvas");return!!(elem.getContext&&elem.getContext("2d"))},isIE:function isIE(){if(navigator.appName==="Microsoft Internet Explorer"){return true}else if(navigator.appName==="Netscape"&&/Trident/.test(navigator.userAgent)){return true}return false},getPluginsString:function getPluginsString(){if(this.isIE()&&this.ie_activex){return this.getIEPluginsString()}else{return this.getRegularPluginsString()}},getRegularPluginsString:function getRegularPluginsString(){return this.map(navigator.plugins,function(p){var mimeTypes=this.map(p,function(mt){return[mt.type,mt.suffixes].join("~")}).join(",");return[p.name,p.description,mimeTypes].join("::")},this).join(";")},getIEPluginsString:function getIEPluginsString(){if(window.ActiveXObject){var names=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(names,function(name){try{new ActiveXObject(name);return name}catch(e){return null}}).join(";")}else{return""}},getScreenResolution:function getScreenResolution(){return[screen.height,screen.width]},getCanvasFingerprint:function getCanvasFingerprint(){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var txt="http://valve.github.io";ctx.textBaseline="top";ctx.font="14px 'Arial'";ctx.textBaseline="alphabetic";ctx.fillStyle="#f60";ctx.fillRect(125,1,62,20);ctx.fillStyle="#069";ctx.fillText(txt,2,15);ctx.fillStyle="rgba(102, 204, 0, 0.7)";ctx.fillText(txt,4,17);return canvas.toDataURL()}};return Fingerprint})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEmasToken=getEmasToken;var _apiAdapter=__webpack_require__(1);var _btoa=__webpack_require__(9);var _btoa2=_interopRequireDefault(_btoa);var _sha=__webpack_require__(12);var _sha2=_interopRequireDefault(_sha);var _format=__webpack_require__(5);var _format2=_interopRequireDefault(_format);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEmasToken(opt){function defer(){var deferred={};var promise=new Promise(function(resolve,reject){deferred.resolve=resolve;deferred.reject=reject});deferred.promise=promise;return deferred}function request(options,throwError){var deferred=defer();var xhr=new window.XMLHttpRequest;function cleanup(type){if(timeoutid){clearTimeout(timeoutid)}if(type==="TIMEOUT"){xhr.abort()}}function makeSuccResponse(status,headers,data){options.response={success:true,status:status,headers:headers,data:data};deferred.resolve(options.response)}function makeErrResponse(status,headers,errType,errCode,errMsg){options.response={success:false,status:status,headers:headers,error:{errType:errType,errCode:errCode,errMsg:decodeURIComponent(errMsg)}};deferred.resolve(options.response)}var timeout=options.timeout;var timeoutid=setTimeout(function(){makeErrResponse(null,"NetworkError","timeout","request timeout");cleanup("TIMEOUT")},timeout);xhr.onreadystatechange=function(){if(xhr.readyState==4){var status=xhr.status;var result;var headers;if(status>=200&&status<300||status==304){cleanup();result=xhr.responseText;headers=xhr.getAllResponseHeaders()||"";if(result&&typeof result==="string"){result=JSON.parse(result)}try{var arr=headers.trim().split(/[\r\n]+/);var headerMap={};arr.forEach(function(line){var parts=line.split(": ");var header=parts.shift().toLocaleLowerCase();var value=parts.join(": ");headerMap[header]=value});makeSuccResponse(status,headerMap,result)}catch(e){makeErrResponse(status,null,"NetworkError","analyseError","analyse response error")}}else{cleanup("ABORT");setTimeout(function(){makeErrResponse(status,null,"NetworkError","requestError","request error")})}}};var curl=options.path;var method=options.method;xhr.open(method,curl,true);xhr.withCredentials=true;xhr.setRequestHeader("Accept","application/json");if(method==="post"&&options.body){xhr.setRequestHeader("Content-type","application/json; charset=utf-8")}else{xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded")}if(options.headers){for(var key in options.headers){xhr.setRequestHeader(key,options.headers[key]);if(options.debug){console.log(key+" is "+options.headers[key])}}}var body=options.body;if(body){xhr.send(JSON.stringify(body))}else{xhr.send()}return deferred.promise}function getSign(value,timestamp,nonce,appSecret){return(0,_sha2.default)(appSecret,value+timestamp+nonce)}function generateSId(){var sId=Math.floor(Math.random()*89999999+1e7);return""+sId}function test(){var timestamp="1593689861435";var nonce="4bd43bf4-bb30-4247-9007-0424f26b1bb6";var body='{"appKey":"20000196","appVersion":"1.0","c0":"generic_x86","c1":"Android SDK built for x86","cmd":"register","notifyEnable":true,"packageName":"com.aliyun.ams.demo.accs","sdkVersion":221,"ttid":"600000@DemoApp_Android_1.0.0","utdid":"Xv3D/f4apCEDAFtMviPkB1AK"}';body=JSON.parse(body);var value=(0,_btoa2.default)(_format2.default.utf16ToUtf8(JSON.stringify(body)));console.log("body is "+JSON.stringify(body));console.log("value is "+value);var sign=getSign(value,timestamp,nonce,"efd5ea8dec5ed635174f24a0b2db9440");console.log("timestamp is "+timestamp);console.log("nonce is "+nonce);console.log("sign is "+sign)}return new Promise(function(resolve,reject){var deviceId=opt.deviceId,sid=opt.sid,appkey=opt.appkey,aserverProxy=opt.aserverProxy,ports=opt.ports,noSign=opt.noSign,debug=opt.debug;var userId=opt.m_params.userId;var protocol="http:";if((0,_apiAdapter.checkIsBrowser)()&&window.location.protocol==="https:"){protocol="https:"}var baseUrl=protocol+"//"+aserverProxy+":"+ports+"/accs/token";if(debug){console.log("appkey is "+appkey);console.log("userId is "+userId);console.log("baseUrl is "+baseUrl);console.log("server deviceId is "+(""+sid+deviceId))}var timestamp=(new Date).getTime();var nonce=generateSId();var body={appKey:appkey,windowId:deviceId,userId:userId,sid:sid};var value=(0,_btoa2.default)(_format2.default.utf16ToUtf8(JSON.stringify(body)));if(debug){console.log("body is "+JSON.stringify(body));console.log("value is "+value)}var sign=getSign(value,timestamp,nonce,"76a1993dd9ab4d3b83a0jsb544a61218");var headers={};if(noSign){headers={}}else{headers={"X-Request-Timestamp":timestamp,"X-Request-Nonce":nonce,"X-Request-Appkey":appkey,"X-Request-Sign":sign}}var options={body:body,headers:headers,method:"post",path:baseUrl,response:null,timeout:2e4,debug:debug};request(options).then(function(resp){var result=resp.data;if(result&&result.success){resolve(result.model)}else{reject({type:"GET_TOKEN_ERROR",message:"获取ACCS token时出错",error:result})}},function(e){reject({type:"GET_TOKEN_ERROR",message:"获取ACCS token时出错",error:e})})})}},function(module,exports){"use strict";var hexcase=0;var b64pad="";var chrsz=8;function hex_sha1(s){return binb2hex(core_sha1(str2binb(s),s.length*chrsz))}function b64_sha1(s){return binb2b64(core_sha1(str2binb(s),s.length*chrsz))}function str_sha1(s){return binb2str(core_sha1(str2binb(s),s.length*chrsz))}function hex_hmac_sha1(key,data){return binb2hex(core_hmac_sha1(key,data))}function b64_hmac_sha1(key,data){return binb2b64(core_hmac_sha1(key,data))}function str_hmac_sha1(key,data){return binb2str(core_hmac_sha1(key,data))}function sha1_vm_test(){return hex_sha1("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}function core_sha1(x,len){x[len>>5]|=128<<24-len%32;x[(len+64>>9<<4)+15]=len;var w=Array(80);var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;var e=-1009589776;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;var olde=e;for(var j=0;j<80;j++){if(j<16)w[j]=x[i+j];else w[j]=rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=safe_add(safe_add(rol(a,5),sha1_ft(j,b,c,d)),safe_add(safe_add(e,w[j]),sha1_kt(j)));e=d;d=c;c=rol(b,30);b=a;a=t}a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);e=safe_add(e,olde)}return Array(a,b,c,d,e)}function sha1_ft(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d}function sha1_kt(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function core_hmac_sha1(key,data){var bkey=str2binb(key);if(bkey.length>16)bkey=core_sha1(bkey,key.length*chrsz);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}var hash=core_sha1(ipad.concat(str2binb(data)),512+data.length*chrsz);return core_sha1(opad.concat(hash),512+160)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function rol(num,cnt){return num<<cnt|num>>>32-cnt}function str2binb(str){var bin=Array();var mask=(1<<chrsz)-1;for(var i=0;i<str.length*chrsz;i+=chrsz){bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<32-chrsz-i%32}return bin}function binb2str(bin){var str="";var mask=(1<<chrsz)-1;for(var i=0;i<bin.length*32;i+=chrsz){str+=String.fromCharCode(bin[i>>5]>>>32-chrsz-i%32&mask)}return str}function binb2hex(binarray){var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt(binarray[i>>2]>>(3-i%4)*8+4&15)+hex_tab.charAt(binarray[i>>2]>>(3-i%4)*8&15)}return str}function binb2b64(binarray){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";for(var i=0;i<binarray.length*4;i+=3){var triplet=(binarray[i>>2]>>8*(3-i%4)&255)<<16|(binarray[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|binarray[i+2>>2]>>8*(3-(i+2)%4)&255;for(var j=0;j<4;j++){if(i*8+j*6>binarray.length*32)str+=b64pad;else str+=tab.charAt(triplet>>6*(3-j)&63)}}return str}module.exports=hex_hmac_sha1}])});